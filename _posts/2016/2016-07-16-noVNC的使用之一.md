---
layout: post
title: noVNC的使用之一
categories:
- Linux
tags:
- 虚拟化
---

> noVNC是一个HTML5 VNC客户端，采用HTML5 websockets、Canvas和JavaScript实现，noVNC被普遍应用于各大云计算、虚拟机控制面板中，比如OpenStack Dashboard 和 OpenNebula Sunstone 都用的是 noVNC. 前面说了 noVNC 采用 WebSockets 实现，但是目前大多数 VNC 服务器都不支持 WebSockets，所以 noVNC 是不能直接连接 VNC 服务器的，怎么办呢？这就需要一个代理来实现websockets和tcp sockets之间的转换，这个代理就是websockify。

## vncserver安装和使用

vncserver是用来实现远程桌面连接的，比如说你由两台机器PC1：192.168.1.101和PC2：192.168.1.102，如果你想在PC1上访问PC2的桌面，就需要在PC2上安装vncserver，然后在PC1上通过vncviewer或noVNC访问PC2。下面以tigervnc-server为例来介绍一下vncserver的安装和使用。

**安装**
```
yum -y install tigervnc-server
```
安装完后，查看vncserver的配置文件：
```
[root@mycentos liushaolin]# rpm -qc tigervnc-server
/etc/sysconfig/vncservers
```
在该配置文件中可以修改vncserver的配置，比如远程桌面的sessionnumber，登录时的用户名，屏幕分辨率等等。

**启动sncserver**
```
vncserver :n
```
这里的n就是sessionnumber，不指定的话默认为1，第一次启动时会提示输入密码，以后也可以使用vncpasswd命令修改密码。VNC的默认端口号是5900，而远程桌面连接端口号则是5900+n。如果使用“vncserver :1”命令启动VNC Server，那么端口应该是5901。

**查看连接**

```
vncserver -list[root@mycentos liushaolin]# vncserver -list

TigerVNC server sessions:

X DISPLAY #	PROCESS ID
:1		5918
:3		7726
```

**删除连接**
```
vncserver -kill :n
```
